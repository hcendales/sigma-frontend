<div *ngIf="loading" class="loading">Loading&#8230;</div>
<mat-card>
    <mat-card-header class="mat-card-header-umv">
        <div class="mat-card-header-text">
            <mat-card-subtitle>
                <h2>Registro diario por Cuadrilla PK {{ pk_id_calzada }}</h2>
            </mat-card-subtitle>
        </div>
    </mat-card-header>
    <mat-accordion>
        <mat-expansion-panel >
            <mat-expansion-panel-header>
            </mat-expansion-panel-header>
             <app-mapa-umv 
                #mapa 
                [center]="mapCenter" 
                [basemap]="basemapType" 
                [zoom]="mapZoomLevel"
                style="width: 100%;height: 500px; display:block; margin-bottom: -270px;"
            >
            </app-mapa-umv>
        </mat-expansion-panel>
    </mat-accordion>

    <mat-action-row>
        <button type="button" matTooltip="VOLVER" mat-icon-button class="color-primary-100" (click)="regresar()">
            <mat-icon>keyboard_return</mat-icon>
        </button>
    </mat-action-row>


    <mat-tab-group mat-stretch-tabs class="example-stretched-tabs mat-elevation-z4" mat-align-tabs="center">
        <mat-tab label="Informacion General" *ngIf="ready">
            <app-seccion-informacion-general [listas]="listas" [persona]="persona" (idInformeDiarioCuadrilla)="getIdInforme($event)" ></app-seccion-informacion-general>
        </mat-tab>
        <mat-tab  *ngIf="idInforme > 0">
            <ng-template mat-tab-label>
                <mat-icon class="example-tab-icon">grid_view</mat-icon>
            </ng-template>
            <mat-card-header class="mat-card-header-umv">
                <div class="mat-card-header-text">
                    <mat-card-subtitle>
                        <h2>
                            <button (click)="accordion.openAll()" mat-icon-button matTooltip="Expandir">
                                <mat-icon>unfold_more</mat-icon>
                            </button>
                            <button (click)="accordion.closeAll()" mat-icon-button matTooltip="Contraer">
                                <mat-icon>unfold_less</mat-icon>
                            </button>
                        </h2>
                    </mat-card-subtitle>
                </div>
            </mat-card-header>
            <mat-accordion class="headers-align" multi dynamicHeight *ngIf="ready">
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Información del Personal
                        </mat-panel-title>
                        <mat-panel-description>
                            &nbsp; <mat-icon>feed</mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-seccion-informacion-del-personal [listas]="listas" [idInforme]="idInforme"></app-seccion-informacion-del-personal>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Cantidades de Obra
                        </mat-panel-title>
                        <mat-panel-description>
                            &nbsp; <mat-icon>feed</mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-seccion-cantidades-de-obra [listas]="listas" [idInforme]="idInforme"></app-seccion-cantidades-de-obra>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Control de Calidad
                        </mat-panel-title>
                        <mat-panel-description>
                            &nbsp; <mat-icon>feed</mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-seccion-control-de-calidad [listas]="listas" [idInforme]="idInforme"></app-seccion-control-de-calidad>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Materiales
                        </mat-panel-title>
                        <mat-panel-description>
                            &nbsp; <mat-icon>feed</mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-seccion-materiales [listas]="listas" [idInforme]="idInforme" ></app-seccion-materiales>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Mezclas Asfalticas / Concretos
                        </mat-panel-title>
                        <mat-panel-description>
                            &nbsp; <mat-icon>feed</mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-seccion-mezcla-asfalticas-concretos [listas]="listas" [idInforme]="idInforme" ></app-seccion-mezcla-asfalticas-concretos>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Maquinaria 
                        </mat-panel-title>
                        <mat-panel-description>
                            &nbsp; <mat-icon>feed</mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-seccion-maquinaria [listas]="listas" [idInforme]="idInforme"  ></app-seccion-maquinaria>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Retiro de Materiales y Escombros
                        </mat-panel-title>
                        <mat-panel-description>
                            &nbsp; <mat-icon>feed</mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-seccion-retiro-materiales-escombros [listas]="listas" [idInforme]="idInforme" ></app-seccion-retiro-materiales-escombros>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Observaciones Generales
                        </mat-panel-title>
                        <mat-panel-description>
                            &nbsp; <mat-icon>feed</mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-seccion-observaciones-generales [listas]="listas" [idInforme]="idInforme" ></app-seccion-observaciones-generales>
                </mat-expansion-panel>
            </mat-accordion>
        </mat-tab>
    </mat-tab-group>



</mat-card>
<br>